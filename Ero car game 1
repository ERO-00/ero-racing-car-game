ero-racing-game/
│
├── <!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ERO的賽車遊戲 最終版本</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- 主選單 -->
  <div id="menu">
    <h1>🏎️ ERO的賽車遊戲 最終版本</h1>
    <button id="startBtn">開始遊戲</button>
    <button id="settingsBtn">設定</button>
  </div>

  <!-- 車款選擇畫面 -->
  <div id="carSelect" class="hidden">
    <h2>選擇你的車款</h2>
    <div id="carContainer">
      <div class="car" data-type="speed">速度型 🚀</div>
      <div class="car" data-type="balance">平衡型 ⚖️</div>
      <div class="car" data-type="control">操控型 🕹️</div>
      <div class="car" data-type="average">平均型 🏁</div>
      <div class="car" data-type="extreme">極速型 🔥</div>
    </div>
    <button id="confirmCar">確定選擇</button>
  </div>

  <!-- 設定畫面 -->
  <div id="settings" class="hidden">
    <h2>設定</h2>
    <label><input type="checkbox" id="gyroToggle" /> 啟用重力感應操作</label>
    <button id="closeSettings">關閉</button>
  </div>

  <!-- 遊戲畫面 -->
  <canvas id="gameCanvas"></canvas>

  <script src="script.js"></script>
</body>
</html>
├── body {
  margin: 0;
  overflow: hidden;
  font-family: "Noto Sans TC", sans-serif;
  background: linear-gradient(to bottom, #0d0d1a, #1a1a2e);
  color: #fff;
  text-align: center;
}

#menu, #carSelect, #settings {
  position: absolute;
  width: 100%;
  top: 30%;
  background: rgba(0, 0, 0, 0.7);
  padding: 20px;
}

button {
  padding: 10px 25px;
  font-size: 18px;
  border-radius: 12px;
  background-color: #0af;
  color: white;
  border: none;
  margin: 10px;
  cursor: pointer;
  transition: background 0.2s;
}

button:hover {
  background-color: #09c;
}

.hidden {
  display: none;
}

canvas {
  display: none;
  background: radial-gradient(circle at center, #222 0%, #000 100%);
}

#carContainer {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
}

.car {
  min-width: 70%;
  margin: 10px auto;
  padding: 40px;
  background: #222;
  border-radius: 15px;
  font-size: 22px;
  box-shadow: 0 0 15px #0af;
  scroll-snap-align: center;
  transition: transform 0.3s;
}

.car:hover {
  transform: scale(1.1);
}

#healthBar {
  position: absolute;
  top: 10px;
  left: 10px;
  display: flex;
}

.healthUnit {
  width: 20px;
  height: 20px;
  background: red;
  margin-right: 5px;
  border-radius: 4px;
}

#boostBar {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 60%;
  height: 12px;
  background: #444;
  border-radius: 10px;
  overflow: hidden;
}

#boostFill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, cyan, blue);
  transition: width 0.2s;
}
└── const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// UI 元件
const startBtn = document.getElementById("startBtn");
const settingsBtn = document.getElementById("settingsBtn");
const settingsPanel = document.getElementById("settings");
const closeSettings = document.getElementById("closeSettings");
const gyroToggle = document.getElementById("gyroToggle");
const carSelect = document.getElementById("carSelect");
const confirmCar = document.getElementById("confirmCar");
const menu = document.getElementById("menu");

let carType = "average";
let useGyro = false;
let health = 7;
let boosting = false;
let boostCharge = 100;
let player = { x: canvas.width / 2, y: canvas.height - 150, speed: 6 };
let keys = {};

let obstacles = [];

settingsBtn.onclick = () => settingsPanel.classList.remove("hidden");
closeSettings.onclick = () => settingsPanel.classList.add("hidden");
gyroToggle.onchange = e => (useGyro = e.target.checked);

startBtn.onclick = () => {
  menu.style.display = "none";
  carSelect.classList.remove("hidden");
};

confirmCar.onclick = () => {
  carType = document.querySelector(".car:focus")?.dataset.type || "average";
  carSelect.classList.add("hidden");
  startGame();
};

// 操作設定
window.addEventListener("keydown", e => (keys[e.key] = true));
window.addEventListener("keyup", e => (keys[e.key] = false));

if (window.DeviceOrientationEvent) {
  window.addEventListener("deviceorientation", event => {
    if (useGyro) player.x += event.gamma / 2;
  });
}

function drawCar() {
  ctx.fillStyle = "#0ff";
  ctx.fillRect(player.x - 25, player.y - 50, 50, 100);
}

function drawObstacles() {
  ctx.fillStyle = "orange";
  obstacles.forEach(o => ctx.fillRect(o.x, o.y, 50, 50));
}

function drawUI() {
  // 血量
  for (let i = 0; i < health; i++) {
    ctx.fillStyle = "red";
    ctx.fillRect(20 + i * 25, 20, 20, 20);
  }

  // 加速條
  ctx.fillStyle = "#444";
  ctx.fillRect(canvas.width / 2 - 150, canvas.height - 40, 300, 10);
  ctx.fillStyle = "cyan";
  ctx.fillRect(canvas.width / 2 - 150, canvas.height - 40, 3 * boostCharge, 10);
}

function startGame() {
  canvas.style.display = "block";
  for (let i = 0; i < 5; i++) {
    obstacles.push({ x: Math.random() * canvas.width, y: -i * 300 });
  }

  function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // 控制移動
    if (keys["ArrowLeft"]) player.x -= player.speed;
    if (keys["ArrowRight"]) player.x += player.speed;
    if (keys[" "]) activateBoost();

    // 障礙物移動
    obstacles.forEach(o => (o.y += 5));
    obstacles = obstacles.filter(o => o.y < canvas.height + 50);

    // 碰撞檢測
    for (let o of obstacles) {
      if (Math.abs(o.x - player.x) < 50 && Math.abs(o.y - player.y) < 50) {
        health--;
        o.y = canvas.height + 100; // 移除
        if (health <= 0) {
          alert("遊戲結束！");
          location.reload();
        }
      }
    }

    drawCar();
    drawObstacles();
    drawUI();

    requestAnimationFrame(gameLoop);
  }
  gameLoop();
}

function activateBoost() {
  if (!boosting && boostCharge > 0) {
    boosting = true;
    player.speed *= 2;
    let boostInterval = setInterval(() => {
      boostCharge -= 2;
      if (boostCharge <= 0) {
        clearInterval(boostInterval);
        player.speed /= 2;
        boosting = false;
        boostCharge = 100;
      }
    }, 100);
  }
}
